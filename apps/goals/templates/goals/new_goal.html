<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Track New Goal</title>
    {%load staticfiles%}
    <link rel="stylesheet" href="{%static 'goals/css/new_goal_styles.css'%}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
      //append a new minigoal section
      var count = 0
      $('#add_minigoal').click(function(){
        count = count+1
        $('#minigoals').append('<br>MiniGoal: <input type="text" name="mini_name'+count+'" value=""><br>Description: <textarea name="description'+count+'" rows="8" cols="80"></textarea><br>Timespan: <select name="time_increment'+count+'">{% for number in numbers %}<option value="{{number}}">{{ number }}</option>{% endfor %}</select><select name="time'+count+'">{% for time in times %}<option value="{{time}}">{{time}}</option>{% endfor %}</select><br>Repeating: Yes<input type="radio" name="repeating'+count+'" value="Yes">No<input type="radio" name="repeating'+count+'" value="No" checked="checked"><br># of Times:<select name="repeat_times'+count+'">{%for number in numbers2%}<option value="{{number}}">{{number}}</option>{%endfor%}</select><br>');
      $('#form').attr('action','/create_goal/'+count)
      });
    });
    </script>
  </head>
  <body>
    <div class="banner">
      <a href="/dashboard"><button>Dashboard</button></a>
      <a href="/logout"><button>Logout</button></a>
      <h1>Track goal</h1>
    </div>
    <div class="body">
      <form id='form' action="/create_goal/0" method="post">
        {%csrf_token%}
        {%if messages%}
          {%for message in messages%}
          <span style='color:red'>{{message}}</span><br>
          {%endfor%}
        {%endif%}
        Goal: <input type="text" name="name" value=""><br>
        Goal Description: <textarea name="description" rows="8" cols="80"></textarea>
        <br>
        <br>
        <div id='minigoals'>
          Mini Goal: <input type="text" name="mini_name" value=""><br>
          Description: <textarea name="mini_description" rows="8" cols="80"></textarea><br>
          Timespan: <select name="time_increment">
            {% for number in numbers %}
              <option value="{{number}}">{{ number }}</option>
            {% endfor %}
          </select>
          <select name="time">
            {% for time in times %}
              <option value="{{time}}">{{time}}</option>
            {% endfor %}
          </select><br>
          Repeating:
          Yes<input type="radio" name="repeating" value="Yes">
          No<input type="radio" name="repeating" value="No" checked="checked"><br>
          # of Times:
          <select name="repeat_times">
          {%for number in numbers2%}
              <option value="{{number}}">{{number}}</option>
          {%endfor%}
          </select>
        </div>
        <br>
        <button type='button' id="add_minigoal">Add mini-goal</button><br><br>
        <input type="submit" name="" value="Track Goal!">
      </form>
    </div>
  </body>
</html>
